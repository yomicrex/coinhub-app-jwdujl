# Application Environment
NODE_ENV=development

# Frontend Configuration
# Used for password reset links in emails
FRONTEND_URL=http://localhost:3000

# Authentication Origins & CSRF Configuration
# Comma-separated list of additional trusted origins for CORS/origin validation
#
# CRITICAL: Native mobile apps (iOS/Android/TestFlight) fix
# - Mobile apps don't send origin/referer headers
# - Requests without origin headers are AUTOMATICALLY ALLOWED
# - CSRF checks are BYPASSED for requests without browser headers (mobile apps)
# - This is required for TestFlight and native app authentication to work
#
# CSRF PROTECTION:
# - Mobile apps (detected by no origin/referer header) bypass CSRF checks
# - Web browsers (with origin/referer headers) use CSRF tokens enforced by Better Auth
# - Bearer token authentication protects mobile requests (no CSRF token needed)
# - This allows secure authentication for both web and mobile platforms
#
# By default, the following origins are validated ONLY IF they send an origin header:
# - http://localhost:*, http://127.0.0.1:* (development web)
# - exp://localhost:8081, exp://, exps:// (Expo Go mobile app)
# - coinhub://, CoinHub://, com.coinhub.app:// (iOS app schemes)
# - android-app:// (Android app schemes)
# - capacitor://, ionic:// (hybrid mobile apps)
# - https://qjj7hh75bj9rj8tez54zsh74jpn3wv24.app.specular.dev (production)
#
# Mobile App Authentication Flow:
# 1. POST /api/auth/sign-in/email (no origin header, no CSRF token)
#    → Backend detects mobile app (no origin/referer)
#    → CSRF check bypassed
#    → Authentication succeeds
# 2. Response includes session token: { user, session: { token } }
# 3. Mobile app stores token for future requests
# 4. Future requests use Authorization: Bearer <token>
#
# Set TRUSTED_ORIGINS to add more allowed origins for web apps (comma-separated)
TRUSTED_ORIGINS=https://example.com,https://app.example.com

# Email Configuration
# EMAIL_PROVIDER options: console, smtp, sendgrid, resend
EMAIL_PROVIDER=console

# Email sender address
EMAIL_FROM=noreply@coinhub.example.com

# SMTP Configuration (for EMAIL_PROVIDER=smtp)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# SendGrid Configuration (for EMAIL_PROVIDER=sendgrid)
SENDGRID_API_KEY=your-sendgrid-api-key

# Resend Configuration
# Get from https://resend.com/api-keys
# Required for password reset emails
RESEND_API_KEY=re_your_api_key_here

# Resend sender email (must match verified domain)
RESEND_FROM_EMAIL=noreply@coinhub.example.com

# Resend reply-to email
RESEND_REPLY_TO_EMAIL=support@coinhub.example.com

# Database (Neon or local PGlite)
DATABASE_URL=postgresql://user:password@localhost:5432/coinhub

# Storage
STORAGE_API_BASE_URL=http://localhost:3000/api/storage
