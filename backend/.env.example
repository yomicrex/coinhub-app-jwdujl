# Application Environment
NODE_ENV=development

# Frontend Configuration
# Used for password reset links in emails
FRONTEND_URL=http://localhost:3000

# Authentication Origins & CSRF Configuration
# Comma-separated list of additional trusted origins for CORS/origin validation
#
# CRITICAL: Native mobile apps (iOS/Android/TestFlight) authentication fix
# - Mobile apps MUST send X-App-Type header to identify themselves
# - Valid X-App-Type values: 'standalone' (TestFlight/production) or 'expo-go' (Expo Go)
# - The frontend should send X-App-Type on ALL requests from mobile apps
# - Backend uses X-App-Type to detect mobile apps and bypass CSRF checks
#
# Mobile App Header Requirements:
# - X-App-Type: 'standalone' (for TestFlight, App Store, Google Play)
# - X-App-Type: 'expo-go' (for Expo Go development)
# - Without this header, web browser CORS/CSRF validation applies
#
# CSRF PROTECTION:
# - Mobile apps (X-App-Type detected): CSRF checks BYPASSED
# - Web browsers (no X-App-Type): CSRF tokens enforced by Better Auth
# - Bearer token authentication protects mobile requests (no CSRF token needed)
# - This allows secure authentication for both web and mobile platforms
#
# Origin Handling:
# - Origin header is ONLY requirement for web browsers
# - Mobile apps can work without origin header if X-App-Type is provided
# - By default, the following origins are validated for web requests:
#   - http://localhost:*, http://127.0.0.1:* (development web)
#   - exp://localhost:8081, exp://, exps:// (Expo Go with origin)
#   - coinhub://, CoinHub://, com.coinhub.app:// (iOS app schemes)
#   - android-app:// (Android app schemes)
#   - capacitor://, ionic:// (hybrid mobile apps)
#   - https://qjj7hh75bj9rj8tez54zsh74jpn3wv24.app.specular.dev (production)
#
# Mobile App Authentication Flow:
# 1. POST /api/auth/sign-in/email
#    Headers: X-App-Type: 'standalone' (no origin header needed)
#    Body: { email, password }
# 2. Backend detects X-App-Type header â†’ CSRF bypassed
# 3. Response: { user: {...}, session: { token, expiresAt } }
# 4. Mobile app stores token for future requests
# 5. Future requests use Authorization: Bearer <token>
#
# Set TRUSTED_ORIGINS to add more allowed origins for web apps (comma-separated)
TRUSTED_ORIGINS=https://example.com,https://app.example.com

# Email Configuration
# EMAIL_PROVIDER options: console, smtp, sendgrid, resend
EMAIL_PROVIDER=console

# Email sender address
EMAIL_FROM=noreply@coinhub.example.com

# SMTP Configuration (for EMAIL_PROVIDER=smtp)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# SendGrid Configuration (for EMAIL_PROVIDER=sendgrid)
SENDGRID_API_KEY=your-sendgrid-api-key

# Resend Configuration
# Get from https://resend.com/api-keys
# Required for password reset emails
RESEND_API_KEY=re_your_api_key_here

# Resend sender email (must match verified domain)
RESEND_FROM_EMAIL=noreply@coinhub.example.com

# Resend reply-to email
RESEND_REPLY_TO_EMAIL=support@coinhub.example.com

# Database (Neon or local PGlite)
DATABASE_URL=postgresql://user:password@localhost:5432/coinhub

# Storage
STORAGE_API_BASE_URL=http://localhost:3000/api/storage
